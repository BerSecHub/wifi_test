================================================================
 VALHALLA WiFi - MANUAL PENTESTERA
 Instrukcja krok po kroku dla zielonego
================================================================

Wersja: 1.0.0
Dotyczy: valhalla_wifi.sh
Sieci docelowe: KonsWiFi_AR, KonsGuest_AR (Aruba)
Drugorzedne: KonsWiFi, KonsGuest (HPE830 - wygaszane)

================================================================
 SPIS TRESCI
================================================================

  CZESC A - ZANIM WYJDZIESZ Z DOMU (przygotowanie)
  CZESC B - PRZYJEZDZASZ NA MIEJSCE (setup)
  CZESC C - ODPALASZ SKRYPT (krok po kroku kazdy modul)
  CZESC D - CO ROBIC JAK COS NIE DZIALA (troubleshooting)
  CZESC E - PO TESCIE (raport, cleanup)
  CZESC F - SCIAGAWKA KOMEND (quick reference)


================================================================
 CZESC A - ZANIM WYJDZIESZ Z DOMU
================================================================

A1. DOKUMENTY - MASZ MIEC ZE SOBA:
    - Pisemna autoryzacja na pentest (podpisana!)
    - Zakres testow (jakie sieci, jakie testy)
    - Kontakt do osoby po stronie klienta (admin IT)
    - Swoj dowod osobisty

A2. SPRZET:
    - Laptop z Kali Linux (bare metal, nie VM!)
    - Karta WiFi z obsluga monitor mode
      (polecane: Alfa AWUS036ACH, Alfa AWUS036ACHM, TP-Link Archer T3U Plus)
    - Ladowarka do laptopa
    - Kabel ethernet (na wszelki wypadek, do pobrania repo)
    - Pendrive z kopiq skryptu (backup)

A3. PRZYGOTOWANIE KALI (zrob to W DOMU, nie na miejscu!):

    Krok 1: Podlacz sie do internetu (ethernet lub WiFi domowe)

    Krok 2: Zaktualizuj system
    -------------------------------------------------------
    sudo apt update && sudo apt upgrade -y
    -------------------------------------------------------

    Krok 3: Zainstaluj narzedzia z wyprzedzeniem
    -------------------------------------------------------
    sudo apt install -y aircrack-ng reaver mdk4 hostapd-wpe \
      tshark nmap hcxdumptool hcxtools arp-scan iw macchanger
    -------------------------------------------------------

    Krok 4: Pobierz skrypt z repo
    -------------------------------------------------------
    cd ~
    git clone <ADRES_TWOJEGO_REPO> pentest-skrypty
    cd pentest-skrypty
    -------------------------------------------------------

    Krok 5: Nadaj uprawnienia
    -------------------------------------------------------
    chmod +x valhalla_wifi.sh
    -------------------------------------------------------

    Krok 6: Sprawdz czy karta WiFi dziala
    -------------------------------------------------------
    iwconfig
    -------------------------------------------------------
    Powinienes zobaczyc cos jak: wlan0 lub wlan1
    Jesli nie widzisz - karta nie jest rozpoznawana (patrz troubleshooting)

    Krok 7: Sprawdz monitor mode
    -------------------------------------------------------
    sudo airmon-ng start wlan0
    sudo airmon-ng stop wlan0mon
    -------------------------------------------------------
    Jesli nie bylo bledu - karta obsluguje monitor mode.

    Krok 8: Test szybki skryptu
    -------------------------------------------------------
    sudo ./valhalla_wifi.sh
    -------------------------------------------------------
    Powinien pojawic sie banner VALHALLA WiFi, pytanie o autoryzacje.
    Wpisz 't' i sprawdz czy:
    - Narzedzia sa wykryte (zielone ptaszki)
    - Interfejs WiFi jest znaleziony
    Potem wyjdz przez 'q'.

    GOTOWE. Laptop spakowac, ladowarke wziac, jedziesz.


================================================================
 CZESC B - PRZYJEZDZASZ NA MIEJSCE
================================================================

B1. ZANIM COKOLWIEK ODPALASZ:
    - Przedstaw sie osobie kontaktowej
    - Pokaz autoryzacje
    - Zapytaj: "Gdzie moge usiasc? Czy sa jakies ograniczenia?"
    - Zapytaj o haslo do sieci gosciennej (KonsGuest_AR)
      - bedziesz potrzebowal do testu izolacji (Modul 7)
    - Zapytaj czy sa inne osoby testujace WiFi (zeby sie nie grysc)
    - Zapytaj o dane logowania 802.1X jezeli sieci sa Enterprise
      (np. testowy user/pass do KonsWiFi_AR)

B2. USADOW SIE:
    - Najlepiej blisko AP (Access Pointow) - lepszy sygnal
    - Podlacz ladowarke (pentest zjada baterie!)
    - Podlacz karte WiFi (jesli zewnetrzna USB)

B3. ODPAL KALI:
    - Zaloguj sie
    - Otworz terminal (Ctrl+Alt+T)
    - Przejdz do katalogu:
    -------------------------------------------------------
    cd ~/pentest-skrypty
    -------------------------------------------------------

B4. JESLI NIE MASZ SKRYPTU (nie klonowales repo):
    Opcja 1 - Ethernet:
    -------------------------------------------------------
    sudo dhclient eth0
    git clone <ADRES_REPO> pentest-skrypty
    cd pentest-skrypty && chmod +x valhalla_wifi.sh
    -------------------------------------------------------

    Opcja 2 - Pendrive:
    -------------------------------------------------------
    sudo mkdir -p /mnt/usb
    sudo mount /dev/sdb1 /mnt/usb
    cp -r /mnt/usb/pentest-skrypty ~/
    cd ~/pentest-skrypty && chmod +x valhalla_wifi.sh
    -------------------------------------------------------
    (nazwa dysku moze byc inna, sprawdz przez: lsblk)


================================================================
 CZESC C - ODPALASZ SKRYPT
================================================================

-------------------------------------------------------
sudo ./valhalla_wifi.sh
-------------------------------------------------------

Zobaczysz banner VALHALLA WiFi i pytanie o autoryzacje.


C0. INICJALIZACJA (automatyczna):
    Skrypt sam:
    1. Sprawdzi czy jestes root (musisz byc!)
    2. Zapyta o autoryzacje -> wpisz 't'
    3. Sprawdzi narzedzia -> powinny byc zielone ptaszki
       Jesli brak - zapyta czy zainstalowac -> wpisz 't'
       (potrzebny internet! albo zainstaluj wczesniej w domu)
    4. Znajdzie karte WiFi -> powinien wykryc np. wlan0
       Jesli kilka kart -> wybierz te do pentestow
    5. Stworzy katalog wynikow

    Potem pojawi sie MENU GLOWNE.


C1. MENU GLOWNE - CO WYBRAC:
    -------------------------------------------------------
    1) Rekonesans              - ZAWSZE uruchamiaj jako pierwszy!
    2) Analiza zabezpieczen    - po rekonesansie
    3) Test deautentykacji     - potrzebuje danych z rekonesansu
    4) Przechwycenie handshake - potrzebuje danych z rekonesansu
    5) Test WPS                - potrzebuje danych z rekonesansu
    6) Evil Twin / Rogue AP    - test agresywny, pytaj klienta!
    7) Izolacja klientow       - wymaga polaczenia z siecia
    8) Generuj raport          - na koncu!

    A) Uruchom WSZYSTKO        - jedzie 1-7 po kolei + raport
    Q) Wyjscie
    -------------------------------------------------------

    DLA POCZATKUJACEGO POLECAM:
    -> Wpisz 'A' i jedz ze wszystkim po kolei.
    -> Skrypt bedzie pytac o potwierdzenie przy kazdym module.
    -> Mozesz tez robic modul po module (1, potem 2, itd.)


C2. MODUL 1: REKONESANS (wpisz '1' w menu)
    -------------------------------------------------------
    Co sie dzieje:
    - Karta przechodzi w tryb monitor (nasłuchuje wszystko)
    - Przez 30 sekund skanuje otoczenie
    - Potem pokazuje wyniki

    Co zobaczysz:
    - Pasek postepu skanowania [####............] 15/30s
    - Tabelke z sieciami docelowymi (gwiazdka = priorytet)
    - Tabelke ze wszystkimi sieciami w zasiegu

    Na co patrzysz:
    - Czy widac KonsWiFi_AR i KonsGuest_AR?
    - Jaki typ szyfrowania (WPA2, WPA3)?
    - Jaki typ auth (PSK = haslo, MGT = Enterprise/802.1X)?
    - Ile klientow (kolumna "Kl.")?
    - Sila sygnalu (im blizej 0, tym lepiej: -30 swietny, -70 slaby)

    UWAGA: Jesli nie widac sieci docelowych:
    - Moze za slaby sygnal -> przesiadz sie blizej AP
    - Moze karta nie lapie 5GHz -> sprawdz czy karta obsluguje
    - Sprobuj skan jeszcze raz

    Nacisnij ENTER aby wrocic do menu.


C3. MODUL 2: ANALIZA ZABEZPIECZEN (wpisz '2' w menu)
    -------------------------------------------------------
    WYMAGA: Najpierw musisz zrobic Modul 1!

    Co sie dzieje:
    - Analizuje typy szyfrowania znalezionych sieci
    - Skanuje WPS (15 sekund)
    - Testuje PMKID (20 sekund)
    - Sprawdza ochrone ramek zarzadzania

    Co zobaczysz:
    - Dla kazdej sieci: typ szyfrowania i ocena
      SILNE (zielone) = WPA3 lub WPA2-Enterprise
      SREDNIE (zolte) = WPA2-PSK
      SLABE (czerwone) = WEP lub Open
    - Status WPS:
      WYLACZONE (zielone) = dobrze
      WLACZONE (czerwone) = zle, podatnosc!
    - PMKID:
      Brak = dobrze
      Przechwycono = zle, mozna laczyc haslo offline

    Po zakonczeniu - ENTER, wracasz do menu.


C4. MODUL 3: TEST DEAUTENTYKACJI (wpisz '3' w menu)
    -------------------------------------------------------
    WYMAGA: Modul 1 (rekonesans)

    Co to jest deauth?
    -> Wysylamy falszywe pakiety WiFi ktore mowia klientowi
       "rozlacz sie". Jesli siec nie ma ochrony 802.11w,
       klient sie rozlaczy.

    Krok po kroku:
    1. Skrypt pokaze liste sieci docelowych
    2. Wybierz siec do testowania (wpisz numer)
    3. Jesli sa klienci - wybierz konkretnego lub broadcast
    4. Skrypt pyta o potwierdzenie -> wpisz 't'
    5. Wysyla 5 ramek deauth (bezpieczna ilosc)
    6. MUSISZ OBSERWOWAC efekt:

    JAK OBSERWOWAC:
    -> Jesli masz drugiego laptopa/telefon podlaczony do tej sieci:
       Sprawdz czy stracil polaczenie na chwile
    -> Jesli klient z listy to telefon kolegi z IT:
       Zapytaj go czy mu sie odcielo WiFi

    7. Skrypt pyta o wynik -> wybierz:
       1 = klient sie rozlaczyl (siec PODATNA)
       2 = klient sie NIE rozlaczyl (siec CHRONIONA - MFP dziala)
       3 = nie wiesz

    Po zakonczeniu - ENTER, wracasz do menu.


C5. MODUL 4: PRZECHWYCENIE HANDSHAKE (wpisz '4' w menu)
    -------------------------------------------------------
    WYMAGA: Modul 1 (rekonesans)

    Co to jest handshake?
    -> Kiedy urzadzenie laczy sie z WiFi, wymienia sie kluczami
       z AP. Przechwycony handshake pozwala pozniej probowac
       zlamac haslo offline (slownikiem).

    Krok po kroku:
    1. Wybierz siec docelowa
    2. Potwierdz rozpoczecie -> 't'
    3. Skrypt nasluchuje przez max 120 sekund
    4. Po 5 sekundach zapyta czy wyslac deauth
       -> 't' (zwieksza szanse na przechwycenie)
    5. Czekaj na pasek postepu...
    6. Na koniec:
       "Handshake przechwycony!" = SUKCES (siec podatna na offline atak)
       "Brak kompletnego handshake" = nie udalo sie

    UWAGA DLA ENTERPRISE:
    -> Sieci 802.1X (KonsWiFi_AR jesli Enterprise) wymieniaja
       ramki EAPOL zamiast prostego handshake PSK.
    -> Skrypt to tez przechwyci i policzy.

    Plik .cap zostaje w katalogu wynikow.
    Po zakonczeniu - ENTER, wracasz do menu.


C6. MODUL 5: TEST WPS (wpisz '5' w menu)
    -------------------------------------------------------
    WYMAGA: Modul 2 (analiza zabezpieczen - skan WPS)

    Co to jest WPS?
    -> WiFi Protected Setup - przyciski/PIN na routerze
       do latwego laczenia. PIN ma tylko 11000 kombinacji.
       PixieDust potrafi go zlamac w sekundy.

    Krok po kroku:
    1. Skrypt pokaze ktore sieci maja WPS
       Jesli ZADNA nie ma -> modul sie konczy (super, bezpiecznie)
    2. Potwierdz test -> 't'
    3. Reaver probuje atak PixieDust (60 sekund max)
    4. Wynik:
       "ZNALEZIONO PIN WPS" = KRYTYCZNE! Siec do zlamania
       "PixieDust nie zadzialal" = dobrze, AP odporne

    UWAGA: Kontrolery Aruba zazwyczaj nie maja WPS.
    Ten modul prawdopodobnie pokaze "WPS wylaczone" i sie skonczy.
    Po zakonczeniu - ENTER, wracasz do menu.


C7. MODUL 6: EVIL TWIN (wpisz '6' w menu)
    -------------------------------------------------------
    WYMAGA: Modul 1 (rekonesans)
    UWAGA: TO JEST AGRESYWNY TEST!

    Co to jest Evil Twin?
    -> Stawiamy falszywy AP o takiej samej nazwie jak prawdziwy.
       Sprawdzamy czy urzadzenia sie z nim lacza.
       Dla Enterprise: przechwytujemy dane logowania.

    !! PRZED URUCHOMIENIEM:
    -> Powiadom klienta/admina ze uruchamiasz evil twin!
    -> Moze zaklocic dzialanie sieci!
    -> Skrypt pyta 2 razy o potwierdzenie

    Krok po kroku:
    1. Skrypt pokaze ostrzezenie (czerwone) -> potwierdz 't'
    2. Wybierz siec do testowania
    3. Skrypt automatycznie wybiera tryb:

       Dla PSK (haslo):
       -> Stawia otwarty AP o tej samej nazwie
       -> Czeka 120 sekund czy ktos sie podlaczy
       -> Wynik: ile urzadzen sie polaczilo

       Dla Enterprise (802.1X):
       -> Uzywa hostapd-wpe (fałszywy serwer RADIUS)
       -> Czeka 120 sekund na proby logowania
       -> Wynik: ile proboek uwierzytelnienia przechwycono

    4. Po 120 sekundach AP sie automatycznie wylacza
    5. Wynik:
       "X klientow polaczilo sie" = FAIL (urzadzenia podatne)
       "Zaden klient" = PASS (dobrze skonfigurowane)
       "Przechwycono X prob" = FAIL (Enterprise credentials leaked)

    Po zakonczeniu - ENTER, wracasz do menu.


C8. MODUL 7: IZOLACJA KLIENTOW (wpisz '7' w menu)
    -------------------------------------------------------
    WYMAGA: Musisz byc PODLACZONY do sieci docelowej!
    (Monitor mode zostanie wylaczony, wraca normalny tryb WiFi)

    PRZED URUCHOMIENIEM:
    -> Polacz sie z siecia np. KonsGuest_AR:
    -------------------------------------------------------
    nmcli dev wifi connect "KonsGuest_AR" password "HASLO"
    -------------------------------------------------------
    lub przez Network Manager (ikona WiFi w trayu)

    -> Jesli Enterprise (802.1X):
    -------------------------------------------------------
    nmcli con add type wifi ifname wlan0 con-name "KonsWiFi_AR" \
      ssid "KonsWiFi_AR" \
      wifi-sec.key-mgmt wpa-eap \
      802-1x.eap peap \
      802-1x.identity "TWOJ_USER" \
      802-1x.password "TWOJE_HASLO" \
      802-1x.phase2-auth mschapv2
    nmcli con up "KonsWiFi_AR"
    -------------------------------------------------------

    Krok po kroku:
    1. Skrypt zapyta z jaka siecia jestes polaczony
       -> wpisz nazwe np. KonsGuest_AR
       -> lub 'skip' zeby pominac
    2. Auto-wykrywa Twoj IP i brame
    3. Test 1 - ARP scan: szuka innych urzadzen w sieci
       -> Znaleziono X hostow = BRAK IZOLACJI (zle)
       -> Brak hostow = IZOLACJA DZIALA (dobrze)
    4. Test 2 - Porty zarzadzania: czy mozesz wejsc na AP/router
       -> Otwarte porty 22/80/443 = DOSTEP DO ZARZADZANIA (zle)
       -> Zamkniete = ZABLOKOWANE (dobrze)
    5. Test 3 - Typowe IP zarzadzania (10.0.0.1 itd.)
    6. Test 4 - Czy jest internet

    Po zakonczeniu - ENTER, wracasz do menu.


C9. MODUL 8: RAPORT (wpisz '8' w menu)
    -------------------------------------------------------
    Generuje plik tekstowy z calym raportem.

    Co jest w raporcie:
    - Data, operator, interfejs
    - Lista testow z wynikami PASS/FAIL/INFO
    - Szczegoly znalezionych sieci
    - REKOMENDACJE (co poprawic)
    - Lista plikow wynikowych
    - Pelny log operacji

    Plik: valhalla_wifi_results/YYYY-MM-DD_HHMMSS/raport_wifi_YYYY-MM-DD.txt

    -> Mozesz go skopiowac na pendrive:
    -------------------------------------------------------
    cp -r ~/pentest-skrypty/valhalla_wifi_results/ /mnt/usb/
    -------------------------------------------------------

    -> Albo wyslac mailem (po zakonczeniu testu, z innego kompa).


C10. OPCJA 'A' - URUCHOM WSZYSTKO:
    -------------------------------------------------------
    Najlepsza opcja dla poczatkujacego!

    Wpisujesz 'A' w menu i skrypt jedzie po kolei:
    Modul 1 -> 2 -> 3 -> 4 -> 5 -> 6 -> 7 -> Raport

    Przy kazdym module pyta Cie o potwierdzenie.
    Mozesz odmowic ('n') i przejsc do nastepnego.
    Na koncu generuje raport ze wszystkiego co zrobiles.

    UWAGA: Przed Modulem 7 (izolacja) musisz sie polaczyc
    z siecia - skrypt Ci o tym przypomni.


================================================================
 CZESC D - TROUBLESHOOTING (co robic jak nie dziala)
================================================================

D1. "Nie znaleziono interfejsu WiFi"
    -------------------------------------------------------
    Przyczyna: Karta WiFi nie jest rozpoznawana.

    Sprawdz:
    sudo lsusb                  # dla kart USB
    sudo lspci                  # dla kart wbudowanych
    dmesg | tail -30            # logi systemowe
    iwconfig                    # interfejsy bezprzewodowe
    ip link show                # wszystkie interfejsy

    Rozwiazania:
    - Odlacz i podlacz karte USB
    - sudo modprobe <driver>    # np. ath9k_htc, rtl8812au
    - Moze potrzebny driver: apt install realtek-rtl88xxau-dkms


D2. "Monitor mode nie dziala"
    -------------------------------------------------------
    Sprawdz:
    sudo airmon-ng check        # co blokuje?
    sudo airmon-ng check kill   # zabij blokujace procesy
    sudo airmon-ng start wlan0  # sprobuj ponownie

    Jesli dalej nie dziala:
    sudo ip link set wlan0 down
    sudo iw dev wlan0 set type monitor
    sudo ip link set wlan0 up
    iwconfig wlan0              # sprawdz czy Mode:Monitor

    Jesli NADAL nie - karta nie obsluguje monitor mode.
    Potrzebujesz innej karty (Alfa AWUS036ACH).


D3. "Skanowanie nie pokazuje sieci docelowych"
    -------------------------------------------------------
    Przyczyny i rozwiazania:
    - Za daleko od AP -> przesiadz sie blizej
    - Karta nie obsluguje 5GHz a sieci sa na 5GHz
      -> sprawdz: iw phy phy0 info | grep -A 20 "Frequencies"
      -> jesli brak 5GHz -> uzywaj karty dual-band
    - Siec ukryta (hidden SSID) -> skrypt ja znajdzie jako <ukryte>
    - AP jest wylaczony -> zapytaj admina

    Mozesz tez wydluzyc czas skanowania. W skrypcie zmien:
    SCAN_TIMEOUT=60  (zamiast 30)


D4. "Nie moge zainstalowac narzedzi (brak internetu)"
    -------------------------------------------------------
    Na miejscu moze nie byc internetu. DLATEGO instaluj W DOMU.

    Jesli zapomniales:
    - Popros o kabel ethernet i dostep do sieci z internetem
    - Albo hotspot z telefonu:
      -> Na telefonie: Udostepnianie internetu / Hotspot
      -> Na Kali: nmcli dev wifi connect "NazwaHotspotu" password "haslo"
      -> sudo apt install -y aircrack-ng reaver mdk4 hostapd-wpe ...


D5. "hostapd-wpe nie startuje (Evil Twin)"
    -------------------------------------------------------
    Najczestsze problemy:
    - Interfejs w trybie monitor -> wyłacz: sudo airmon-ng stop wlan0mon
    - Inny proces uzywa interfejsu:
      sudo airmon-ng check kill
    - Brak plikow certyfikatow:
      cd /etc/hostapd-wpe/certs && ./bootstrap
    - Zly interfejs w konfigu -> skrypt powinien to ogarnac


D6. "Handshake sie nie przechwycil"
    -------------------------------------------------------
    Przyczyny:
    - Brak klientow na sieci (nikt nie jest podlaczony)
      -> Popros admina o podlaczenie testowego urzadzenia
    - Klient nie zrobil reconnect
      -> Uzyj deauth (skrypt pyta o to)
    - Zbyt slaby sygnal -> przesiadz sie blizej
    - Siec Enterprise -> handshake PSK nie istnieje,
      ale EAPOL powinien byc przechwycony

    Mozesz wydluzyc timeout:
    HANDSHAKE_TIMEOUT=300  (5 minut zamiast 2)


D7. "Skrypt sie wywalil / zawiesil"
    -------------------------------------------------------
    Ctrl+C -> skrypt posprząta (cleanup)
    Odpal ponownie: sudo ./valhalla_wifi.sh

    Jesli interfejs zostal w trybie monitor:
    sudo airmon-ng stop wlan0mon
    sudo systemctl restart NetworkManager

    Jesli procesy wisza:
    sudo pkill -f airodump-ng
    sudo pkill -f aireplay-ng
    sudo pkill -f hostapd


D8. "Kali nie widzi pendrive'a"
    -------------------------------------------------------
    lsblk                       # lista dyskow
    sudo fdisk -l               # szczegoly partycji
    sudo mkdir -p /mnt/usb
    sudo mount /dev/sdb1 /mnt/usb   # moze byc sda1, sdc1
    ls /mnt/usb                 # sprawdz zawartosc


================================================================
 CZESC E - PO TESCIE
================================================================

E1. ZAKONCZ SKRYPT:
    -> 'q' w menu glownym
    -> Skrypt automatycznie:
       - Wylaczy monitor mode
       - Zabije procesy w tle
       - Uruchomi NetworkManager
       - Pokaze sciezke do logow

E2. ZABIERZ WYNIKI:
    Katalog z wynikami:
    ~/pentest-skrypty/valhalla_wifi_results/YYYY-MM-DD_HHMMSS/

    W srodku:
    - raport_wifi_YYYY-MM-DD.txt    <- GLOWNY RAPORT
    - valhalla_wifi.log             <- pelny log operacji
    - recon_scan-01.csv             <- surowe dane skanowania
    - handshake_*.cap               <- przechwycone handshake
    - wps_scan.txt                  <- wyniki WPS
    - wps_reaver_*.txt              <- szczegoly testu WPS
    - pmkid_scan.pcapng             <- dane PMKID
    - evil_twin_*.log               <- logi evil twin
    - isolation_*.txt               <- wyniki izolacji

    Skopiuj na pendrive:
    -------------------------------------------------------
    sudo mount /dev/sdb1 /mnt/usb
    cp -r ~/pentest-skrypty/valhalla_wifi_results/ /mnt/usb/
    sudo umount /mnt/usb
    -------------------------------------------------------

E3. POSPRZATAJ KALI (jesli trzeba):
    -------------------------------------------------------
    sudo airmon-ng stop wlan0mon 2>/dev/null
    sudo systemctl restart NetworkManager
    -------------------------------------------------------

E4. RAPORT DLA KLIENTA:
    Plik raport_wifi_*.txt zawiera:
    - Podsumowanie PASS/FAIL
    - Szczegoly kazdego testu
    - Rekomendacje co poprawic

    Typowe rekomendacje dla Aruba:
    - Wlaczyc 802.11w (MFP) -> Aruba: wlan ssid-profile -> mfp
    - Wylaczyc WPS (jesli wlaczony)
    - Weryfikacja cert RADIUS na klientach (Enterprise)
    - Client Isolation -> Aruba: firewall deny inter-user
    - Zablokowac porty zarzadzania z VLAN gosciennego


================================================================
 CZESC F - SCIAGAWKA KOMEND
================================================================

--- URUCHOMIENIE -----------------------------------------------
cd ~/pentest-skrypty
sudo ./valhalla_wifi.sh
----------------------------------------------------------------

--- RECZNE KOMENDY (gdyby skrypt nie dzialal) ------------------

# Wlacz monitor mode
sudo airmon-ng check kill
sudo airmon-ng start wlan0

# Skanuj sieci
sudo airodump-ng wlan0mon

# Skanuj konkretna siec (np. kanal 6, BSSID AA:BB:CC:DD:EE:FF)
sudo airodump-ng -c 6 --bssid AA:BB:CC:DD:EE:FF -w capture wlan0mon

# Wyslij deauth (5 ramek)
sudo aireplay-ng --deauth 5 -a AA:BB:CC:DD:EE:FF wlan0mon

# Wyslij deauth do konkretnego klienta
sudo aireplay-ng --deauth 5 -a AA:BB:CC:DD:EE:FF -c 11:22:33:44:55:66 wlan0mon

# Sprawdz handshake w pliku .cap
aircrack-ng capture-01.cap

# Skan WPS
sudo wash -i wlan0mon

# PixieDust WPS
sudo reaver -i wlan0mon -b AA:BB:CC:DD:EE:FF -c 6 -vv -K 1

# Test PMKID
sudo hcxdumptool -i wlan0mon -o pmkid.pcapng --active_beacon --enable_status=15
sudo hcxpcapngtool -o hash.txt pmkid.pcapng

# Polacz z siecia WiFi
nmcli dev wifi connect "KonsGuest_AR" password "HASLO"

# ARP scan
sudo arp-scan -l

# Nmap scan podsieci
nmap -sn 192.168.1.0/24

# Porty zarzadzania bramy
nmap -Pn -p 22,23,80,443,8080 192.168.1.1

# Wylacz monitor mode
sudo airmon-ng stop wlan0mon
sudo systemctl restart NetworkManager

--- POLACZENIE Z ENTERPRISE 802.1X (reczne) --------------------

nmcli con add type wifi ifname wlan0 con-name "test-enterprise" \
  ssid "KonsWiFi_AR" \
  wifi-sec.key-mgmt wpa-eap \
  802-1x.eap peap \
  802-1x.identity "username" \
  802-1x.password "password" \
  802-1x.phase2-auth mschapv2

nmcli con up "test-enterprise"

--- KOPIOWANIE WYNIKOW NA PENDRIVE ----------------------------

lsblk
sudo mount /dev/sdb1 /mnt/usb
cp -r ~/pentest-skrypty/valhalla_wifi_results/ /mnt/usb/
sudo umount /mnt/usb

----------------------------------------------------------------


================================================================
 REKOMENDOWANA KOLEJNOSC TESTOW
================================================================

  KROK 1: Odpal skrypt                       sudo ./valhalla_wifi.sh
  KROK 2: Wpisz 'A' (uruchom wszystko)       lub recznie 1-8
  KROK 3: Modul 1 - Rekonesans               [30 sekund]
  KROK 4: Modul 2 - Analiza                  [~1 minuta]
  KROK 5: Modul 3 - Deauth                   [~2 minuty]
  KROK 6: Modul 4 - Handshake                [~2 minuty]
  KROK 7: Modul 5 - WPS                      [~1 minuta]
  KROK 8: Modul 6 - Evil Twin                [~3 minuty]
          >>> Polacz sie z siecia goscienna <<<
  KROK 9: Modul 7 - Izolacja                 [~2 minuty]
  KROK 10: Modul 8 - Raport                  [natychmiast]

  Laczny czas: ~15-20 minut (bez komplikacji)

  Powtorz dla drugiej sieci jesli testowane sa osobno.

================================================================
 KONIEC MANUALA
 Powodzenia na tescie!
================================================================
